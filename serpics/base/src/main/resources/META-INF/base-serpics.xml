<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xmlns:data="http://www.springframework.org/schema/data/jpa"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans.xsd 
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/data/jpa
http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <context:component-scan base-package="com.serpics.base.services" />
    <data:repositories base-package="com.serpics.base.data.repositories" 
     base-class="com.serpics.core.data.RepositoryImpl"/>
   
    <bean name="baseAttributeSaveInterceptor"
		class="com.serpics.base.data.interceptor.BaseAttributeSaveInterceptor" />
		
		<bean name="baseAttributeSaveMapping" class="com.serpics.core.data.InterceptorMapping">
		<property name="targetEntity" value="com.serpics.base.data.model.BaseAttribute" />
		<property name="order" value="10" />
		<property name="interceptor" ref="baseAttributeSaveInterceptor" />
	</bean>
    
    <bean name="mediaSaveInterceptor"
		class="com.serpics.base.data.interceptor.MediaSaveInterceptor" />
		
		<bean name="mediaSaveMapping" class="com.serpics.core.data.InterceptorMapping">
		<property name="targetEntity" value="com.serpics.base.data.model.Media" />
		<property name="order" value="10" />
		<property name="interceptor" ref="mediaSaveInterceptor" />
	</bean>
    
    <bean name="defaultMediaSpecification" class="com.serpics.base.data.specification.DefaultMediaSpecification"/>
    <bean name="defaultBaseAttributeSpecification" class="com.serpics.base.data.specification.DefaultBaseAttributeSpecification"/>
    
<!--     					 factory-class="com.serpics.core.data.RepositoryFactoryBean"/> -->
     <!--  facade -->
     <alias name="defaultCountryPopulator" alias="countryPopulator"/>
  	 <bean name="defaultCountryPopulator" class="com.serpics.base.facade.CountryPopulator">
         <property name="geocodeConverter" ref="geocodeConverter"/>
         <property name="regionConverter" ref="regionConverter"/>
    </bean>
    
  	<alias name="defaultCountryConverter" alias="countryConverter"/>
  	<bean name="defaultCountryConverter" parent="abstractConverter">
  		<property name="targetClass" value="com.serpics.base.facade.data.CountryData"/>
  		<property name="populators">
	  		<list>
	  			<ref bean="countryPopulator"/>	
	  		</list>
  		</property>
  	</bean>
  	
  	<alias name="defaultRegionPopulator" alias="regionPopulator"/>
  	<bean name="defaultRegionPopulator" class="com.serpics.base.facade.RegionPopulator">
  		 <property name="countryConverter" ref="countryConverter"/>
  	</bean>
  	
  	<alias name="defaultRegionConverter" alias="regionConverter"/>
  	<bean name="defaultRegionConverter" parent="abstractConverter">
  		<property name="targetClass" value="com.serpics.base.facade.data.RegionData"/>
  		<property name="populators">
	  		<list>
	  			<ref bean="regionPopulator"/>	
	  		</list>
  		</property>
  	</bean>
  	
  	<alias name="defaultGeocodePopulator" alias="geocodePopulator"/>
    <bean name="defaultGeocodePopulator" class="com.serpics.base.facade.GeocodePopulator" />
    
    <alias name="defaultGeocodeConverter" alias="geocodeConverter"/>
    <bean name="defaultGeocodeConverter" parent="abstractConverter">
        <property name="targetClass" value="com.serpics.base.facade.data.GeocodeData"/>
        <property name="populators">
            <list>
                <ref bean="geocodePopulator"/>   
            </list>
        </property>
    </bean>

    <alias name="defaultMediaPopulator" alias="mediaPopulator"/> 
    <bean name="defaultMediaPopulator" class="com.serpics.base.facade.MediaPopulator" />
    
    <alias name="defaultMediaConverter" alias="mediaConverter"/>
    <bean name="defaultMediaConverter" parent="abstractConverter">
    <property name="targetClass" value="com.serpics.base.facade.data.MediaData"/>
    <property name="populators">
      <list>
          <ref bean="mediaPopulator"/>  
      </list>
    </property>
    
    </bean>    
    
     <!--  Tax Converter -->
	<alias name="defaultTaxPopulator" alias="taxPopulator" />
	<bean name="defaultTaxPopulator" class="com.serpics.base.facade.TaxCategoryPopulator" />
	<alias name="defaultTaxConverter" alias="taxConverter"/>
	<bean name="defaultTaxConverter" parent="abstractConverter">
	<property name="targetClass" value="com.serpics.base.facade.data.TaxCategoryData"/>
	<property name="populators">
	  <list>
	      <ref bean="taxPopulator"/>  
	  </list>
	</property>
	</bean>
 </beans>   
